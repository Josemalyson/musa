<?xml version="1.0" encoding="ISO-8859-1"?>
<!DOCTYPE HTML>
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	template="/WEBINF/template/template.xhtml">

	<ui:define name="conteudo">

		<ol class="breadcrumb">
			<li><a href="#">Inicio</a></li>
			<li><a href="#">Cliente</a></li>
			<li class="active">Cadastro</li>
		</ol>

		<h:form prependId="false" id="cliente">

			<p:fieldset legend="Dados Cadastrais">

				<div class="panel paneldefault">
					<div class="panelbody">

						<div class="formgroup row ">
							<label class="colsm2 controllabel">Nome:</label>
							<div class="colsm10">
								<p:inputText id="nome" styleClass="formcontrol"
									value="#{clienteControlador.cliente.nome}"></p:inputText>
							</div>
						</div>

						<div class="formgroup row">
							<label class="colsm2 controllabel">CPF:</label>
							<div class="colsm4">
								<p:inputMask styleClass="formcontrol" mask="?999.999.99999"
									id="cpf" value="#{clienteControlador.cliente.cpf}"
									maxlength="14" />
							</div>
						</div>

						<div class="formgroup row">
							<label class="colsm2 controllabel">RG:</label>
							<div class="colsm4">
								<p:inputMask styleClass="formcontrol" mask="?999.9999" id="rg"
									value="#{clienteControlador.cliente.rg}" maxlength="9" />
							</div>
						</div>

						<div class="formgroup row">
							<label class="colsm2 controllabel">Data de Nascimento:</label>
							<div class="colsm4">
								<p:calendar locale="pt_BR" navigator="true" pattern="dd/MM/yyyy"
									value="#{clienteControlador.cliente.dtNascimento}"
									id="dtNascimento" maxdate="#{clienteControlador.dataMaxima}" />
							</div>
						</div>

						<br />

					</div>
				</div>
			</p:fieldset>

			<br />

			<p:fieldset legend="Dados de Contatos">

				<div class="panel paneldefault">
					<div class="panelbody">

						<p:dataTable widgetVar="tabelaContato" id="contatosCliente"
							styleClass="table tablestriped" var="contato"
							value="#{clienteControlador.cliente.contatoList}"
							emptyMessage="Nenhum contato cadastrado." paginator="true"
							paginatorAlwaysVisible="true" pageLinks="5" rows="5"
							editable="true" rowsPerPageTemplate="5,10,15"
							paginatorPosition="bottom">

							<p:column headerText="C�digo" styleClass="textcenter">
								<h:outputText styleClass="formcontrol" id="ddd"
									value="#{contato.ddd}" />
							</p:column>

							<p:column headerText="Telefone" styleClass="textcenter">
								<h:outputText styleClass="formcontrol" id="telefone"
									value="#{contato.telefone}" />
							</p:column>

							<p:column headerText="email" styleClass="textcenter">
								<h:outputText styleClass="formcontrol" id="email"
									value="#{contato.email}" />
							</p:column>

							<p:column headerText="op��es" styleClass="textcenter">
								<p:commandButton title="Editar" icon="uiiconpencil"
									actionListener="#{clienteControlador.editarContato(contato)}" />
								<p:commandButton title="Excluir" icon="uiicontrash"
									actionListener="#{clienteControlador.setContato(contato)}"
									oncomplete="PF('dialogExcluirCliente').show();" />
							</p:column>

						</p:dataTable>

						<p:commandButton value="Incluir" styleClass="btn btnprimary"
							actionListener="#{clienteControlador.limparModalContato()}" />
						oncomplete="PF('incluirContato').show();" />

					</div>
				</div>

			</p:fieldset>

			<br />

			<p:fieldset legend="Dados do Endere�o">
				<br />

				<div class="panel paneldefault">
					<br />
					<div class="panelbody">

						<div class="formgroup row ">
							<label class="colsm1 controllabel">Rua:</label>
							<div class="colsm6">
								<p:inputText id="rua" styleClass="formcontrol"
									value="#{clienteControlador.cliente.endereco.rua}"></p:inputText>
							</div>


							<label class="colsm1 controllabel">CEP:</label>
							<div class="colsm2">
								<p:inputText id="cep" styleClass="formcontrol"
									value="#{clienteControlador.cliente.endereco.cep}"></p:inputText>
							</div>
						</div>


						<div class="formgroup row ">
							<label class="colsm1 controllabel">Estado:</label>
							<div class="colsm1">
								<h:selectOneMenu id="estado" styleClass="widthfull formcontrol"
									value="#{clienteControlador.cliente.endereco.estado}"
									converter="genericConverter">
									<f:selectItems value="#{clienteControlador.estadoList}"
										var="estado" itemLabel="#{estado.sigla}" itemValue="#{estado}" />
									<p:ajax
										listener="#{clienteControlador.listarCidadesPorEstados()}"
										update="cidade" process="estado" />
								</h:selectOneMenu>
							</div>



							<label class="colsm1 controllabel">Cidade:</label>
							<div class="colsm2">
								<h:selectOneMenu id="cidade" styleClass="widthfull formcontrol"
									value="#{clienteControlador.cliente.endereco.cidade}"
									converter="genericConverter">
									<f:selectItems value="#{clienteControlador.cidadeList}"
										var="cidade" itemLabel="#{cidade.descricao}"
										itemValue="#{cidade}" />
								</h:selectOneMenu>
								<p:inputText id="cidade" styleClass="formcontrol"
									value="#{clienteControlador.cliente.endereco.cidade}"></p:inputText>
							</div>

							<label class="colsm1 controllabel">Bairro:</label>
							<div class="colsm2">
								<p:inputText id="bairro" styleClass="formcontrol"
									value="#{clienteControlador.cliente.endereco.bairro}"></p:inputText>
							</div>

							<label class="colsm1 controllabel">Estado:</label>
							<div class="colsm1">
								<h:selectOneMenu id="estado" styleClass="widthfull formcontrol"
									value="#{clienteControlador.cliente.endereco.estado}"
									converter="genericConverter">
									<f:selectItems value="#{clienteControlador.estadoList}"
										var="estado" itemLabel="#{estado.sigla}" itemValue="#{estado}" />
								</h:selectOneMenu>
							</div>

							<label class="colsm1 controllabel">Numero:</label>
							<div class="colsm1">
								<p:inputText id="numero" styleClass="formcontrol"
									value="#{clienteControlador.cliente.endereco.numero}"></p:inputText>
							</div>
						</div>

					</div>
				</div>
			</p:fieldset>

			<br />

			<div class="forminline textcenter row"
				style="marginbottom: 50px; paddingbottom: 10px;">
				<div class="forminline textcenter row">
					<div class="formgroup">
						<label class="colsm2 controllabel"></label>
						<div class="colsm2">
							<p:commandButton value="Salvar" styleClass="btn btnsuccess"
								process="cliente" action="#{clienteControlador.salvarCliente()}"
								oncomplete="PF('incluirCliente').hide();" />
						</div>
						<label class="colsm2 controllabel"></label>
						<div class="colsm2">
							<p:commandButton value="Cancelar" styleClass="btn btndanger"
								action="/paginas/publica/cliente/listarClientes.jsf" />
						</div>
					</div>
				</div>
			</div>
		</h:form>

		<h:form id="formModalIncluirContato" prependId="false">

			<p:dialog modal="true" widgetVar="incluirContato" id="incluirContato"
				closable="true" draggable="false" width="700"
				header="Incluir Novo Contato" resizable="false">

				<div class="formgroup row ">
					<label class="colsm2 controllabel">Email:</label>
					<div class="colsm10">
						<p:inputText id="email" styleClass="formcontrol"
							value="#{clienteControlador.contato.email}"></p:inputText>
					</div>
				</div>

				<div class="formgroup">

					<p:commandButton id="btnConfirma" value="Confirmar"
						styleClass="btn btnsuccess"
						actionListener="#{clienteControlador.adiconarContato()}" />

					<p:commandButton id="btnCancela" value="Cancelar"
						styleClass="btn btndanger"
						oncomplete="PF('incluirContato').hide();" />
				</div>

			</p:dialog>
		</h:form>


		<h:form id="dialogExcluirClienteForm" prependId="false">

			<p:confirmDialog widgetVar="dialogExcluirCliente"
				id="dialogExcluirCliente" message="Confirmar Exclus�o deste item?"
				closable="false">

				<p:commandButton id="btnConfirmaExclusaoContato" value="Confirmar"
					styleClass="btn btnsuccess"
					onclick="PF('dialogExcluirCliente').hide();"
					actionListener="#{clienteControlador.excluirContato()}" />

				<p:commandButton id="btnCancelaExclusaoContato" value="Cancelar"
					styleClass="btn btndanger"
					onclick="PF('dialogExcluirCliente').hide();"
					oncomplete="PF('confirmarExclusaoCliente').hide();" />

			</p:confirmDialog>

		</h:form>


	</ui:define>
</ui:composition>